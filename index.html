<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<title>Postsai - The Commit Database</title>
<style>
html, body {
	margin: 0;
	padding: 0;
	font-family: sans-serif;
	background-color: #EEE;
}
header {
	background-color: #003;
	color: #FFF;
	padding: 3em 0em;
	box-shadow: 0px 3px 3px 0px #333;
}
h1, h2 {
	font-weight: normal;
	margin: 0;
	padding: 0;
}
h1 {
	font-size: 72px;
}
h2 {
}
h3 {
	font-weight: normal;
	font-size: 30px;
	margin-top: 0
}
.content {
	margin: 0 auto;
	max-width: 900px;
}
a.button {
	margin-top: 2em;
	margin-right: 1em;
	display: inline-block;
	border: 2px solid #FFF;
	border-radius: 10px;
	padding: 1em;
	width: 9em;
	font-size: 24px;
	color: #FFF;
	text-decoration: none;
	box-shadow: 3px 3px 3px 0px #333;
	text-align: center;
}
a.button:hover {
	background-color: #333;
}

section {
	background-color: #FFF;
	padding: 1em;
	margin-top: 2em;
	border-radius:5px;
	box-shadow: 3px 3px 3px 0px #AAA;
}
</style>
</head>
<body>

<header>
<div class="content">
<h1>Postsai</h1>
<h2>The Commit Database</h2>

<a class="button" href="https://github.com/postsai/postsai">GitHub</a>
<a class="button" href="https://arianne-project.org/postsai/query.html?date=month">Demo</a>
<a class="button" href="https://github.com/postsai/postsai/releases/download/v0.3/postsai-0.3.zip">Download</a>

</div>
</header>

<div class="content">

<section>
<h3>Features</h3>
<p>Keep track of recent commits with Postsai</p>

<img src="screenshot.png" title="Screenshot" alt="A screenshot of Postsai showing the table of recent commits"></img>

</section>


<section>
<h3>Installation</h3>

<ul>
<li>Install dependencies</li>
</ul>

<div class="highlight highlight-source-shell"><pre>apt-get install python python-mysqldb</pre></div>

<ul>
<li>Create a postsai database in MySQL.</li>
<li>Unzip postsai to your web server directory</li>
<li>Create a file config.py with the following content:</li>
</ul>

<div class="highlight highlight-source-python"><pre><span class="pl-c">#!/usr/bin/python</span>

db <span class="pl-k">=</span> {
    <span class="pl-s"><span class="pl-pds">"</span>host<span class="pl-pds">"</span></span> : <span class="pl-s"><span class="pl-pds">"</span>localhost<span class="pl-pds">"</span></span>,
    <span class="pl-s"><span class="pl-pds">"</span>user<span class="pl-pds">"</span></span> : <span class="pl-s"><span class="pl-pds">"</span>dbuser<span class="pl-pds">"</span></span>,
    <span class="pl-s"><span class="pl-pds">"</span>password<span class="pl-pds">"</span></span> : <span class="pl-s"><span class="pl-pds">"</span>dbpassword<span class="pl-pds">"</span></span>,
    <span class="pl-s"><span class="pl-pds">"</span>database<span class="pl-pds">"</span></span> : <span class="pl-s"><span class="pl-pds">"</span>postsai<span class="pl-pds">"</span></span>
}</pre></div>

<ul>
<li>Execte <code>./install.py</code> and follow instructions</li>
<li>Configure Apache to execute cgi-scripts in /etc/apache/sites/enabled/*</li>
</ul>

<pre lang="config"><code>AddHandler cgi-script .cy
Options +ExecCGI
</code></pre>

</section>

<section>

<h3><a id="user-content-integration" class="anchor" href="#integration" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" height="16" role="img" version="1.1" viewBox="0 0 16 16" width="16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"></path></svg></a>Integration</h3>

<p>Postsai integrates with various hosted and local repositories:</p>

<ul>
<li>GitHub, Gitlab and SourceForge

<ul>
<li>Just add a Webhook to <a href="https://example.com/postsai/api.py">https://example.com/postsai/api.py</a> and you are done.</li>
</ul></li>
<li>Self hosted Git repositories (including Gitolite)

<ul>
<li>Use <a href="https://github.com/youyongsong/notify-webhook">notify-webhook</a> to setup a webhook with the following configuration<br>webhookurl=<a href="https://example.com/postsai/api.py">https://example.com/postsai/api.py</a><br> webhook-contenttype=application/json</li>
<li>Edit the database table "repositories" to configure links. For git instaweb use: <br>file_url=<a href="http://example.com/?p=%5Brepository%5D;a=blob;f=%5Bfile%5D;h=%5Brevision%5D">http://example.com/?p=[repository];a=blob;f=[file];h=[revision]</a><br>commit_url=<a href="http://example.com/?p=%5Brepository%5D;a=commitdiff;h=%5Brevision%5D">http://example.com/?p=[repository];a=commitdiff;h=[revision]</a></li>
</ul></li>
<li>CVS

<ul>
<li>Define a CVS Webhook <a href="https://github.com/postsai/notify-cvs-webhook">notify-cvs-webhook</a> in CVSROOT/loginfo with --url=<a href="https://example.com/postsai/api.py">https://example.com/postsai/api.py</a></li>
<li>-or- Setup <a href="http://www.viewvc.org/">ViewVC</a> with database support (for example via apt-get install viewvc viewvc-query) and use the same database for Postsai</li>
<li>Edit the database table "repositories" to configure links.<br>file_url=<a href="http://cvs.example.com/cgi-bin/viewvc.cgi/%5Brepository%5D/%5Bfile%5D?revision=%5Brevision%5D&amp;view=markup">http://cvs.example.com/cgi-bin/viewvc.cgi/[repository]/[file]?revision=[revision]&amp;view=markup</a><br>commit_url=<a href="http://cvs.example.com/cgi-bin/viewvc.cgi/%5Brepository%5D/%5Bfile%5D?r1=%5Bold_revision%5D&amp;r2=%5Brevision%5D">http://cvs.example.com/cgi-bin/viewvc.cgi/[repository]/[file]?r1=[old_revision]&amp;r2=[revision]</a></li>
</ul></li>
</ul>

<p>A global issue tracker is supported as fallback by adding the following configuration to config.py</p>

<div class="highlight highlight-source-python"><pre>ui <span class="pl-k">=</span> {
    <span class="pl-s"><span class="pl-pds">"</span>tracker<span class="pl-pds">"</span></span> : <span class="pl-s"><span class="pl-pds">"</span>https://hiszilla.his.de/hiszilla/show_bug.cgi?id=<span class="pl-pds">"</span></span>,
}</pre></div>

</section>

<section>

<h3><a id="user-content-privacy" class="anchor" href="#privacy" aria-hidden="true"><svg aria-hidden="true" class="octicon octicon-link" height="16" role="img" version="1.1" viewBox="0 0 16 16" width="16"><path d="M4 9h1v1h-1c-1.5 0-3-1.69-3-3.5s1.55-3.5 3-3.5h4c1.45 0 3 1.69 3 3.5 0 1.41-0.91 2.72-2 3.25v-1.16c0.58-0.45 1-1.27 1-2.09 0-1.28-1.02-2.5-2-2.5H4c-0.98 0-2 1.22-2 2.5s1 2.5 2 2.5z m9-3h-1v1h1c1 0 2 1.22 2 2.5s-1.02 2.5-2 2.5H9c-0.98 0-2-1.22-2-2.5 0-0.83 0.42-1.64 1-2.09v-1.16c-1.09 0.53-2 1.84-2 3.25 0 1.81 1.55 3.5 3 3.5h4c1.45 0 3-1.69 3-3.5s-1.5-3.5-3-3.5z"></path></svg></a>Privacy</h3>

<p>Postsai supports privacy filters.</p>

<p>A common use case is to prevent queries for changes done by humans. But to allow queries on changes from bot-accounts.</p>

<p>This example limits queries on the who-column to the value "cvsscript".</p>

<div class="highlight highlight-source-python"><pre><span class="pl-c1">filter</span> <span class="pl-k">=</span> {
    <span class="pl-s"><span class="pl-pds">"</span>who<span class="pl-pds">"</span></span> : <span class="pl-s"><span class="pl-pds">"</span>^cvsscript$<span class="pl-pds">"</span></span>
}</pre></div>

<p>By default the full email address of the author is displayed without profile icon. Both settings can be configured independently:</p>

<div class="highlight highlight-source-python"><pre>ui <span class="pl-k">=</span> {
    <span class="pl-s"><span class="pl-pds">"</span>avatar<span class="pl-pds">"</span></span> : <span class="pl-s"><span class="pl-pds">"</span>https://gravatar.com<span class="pl-pds">"</span></span>,
    <span class="pl-s"><span class="pl-pds">"</span>trim_email<span class="pl-pds">"</span></span> : <span class="pl-c1">True</span>
}</pre>

</section>

</div>

</body>
</html>